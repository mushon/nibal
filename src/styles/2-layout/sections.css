/* Section layout from base.css and theme.css */

section {
    margin: 6vh auto;
    margin: 6dvh auto; /* Dynamic viewport height for mobile browsers */
    padding: 5vh 0;
    padding: 5dvh 0; /* Dynamic viewport height for mobile browsers */
    max-width: 640px;
    min-height: 90vh;
    min-height: 90dvh; /* Dynamic viewport height for mobile browsers */
}

/* Section slide animations for navigation */
@keyframes slideFromBottom {
    from {
        opacity: 0;
        transform: translateY(30vh);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideFromTop {
    from {
        opacity: 0;
        transform: translateY(-30vh);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

section.slide-from-bottom {
    animation: slideFromBottom 0.6s ease-out forwards;
}

section.slide-from-top {
    animation: slideFromTop 0.6s ease-out forwards;
}

section img { max-width: 100%; }

/* Caption overlay for active inflection links */
.inflect-caption {
    position: fixed;
    right: 2vw;
    top: 8px;
    max-width: 87vw;
    background: rgba(0, 0, 0, 0.7);
    color: #bbb;
    padding: 0.2em 0.5em;
    border-radius: 6px;
    z-index: 1100;
    font-size: 0.75em;
    line-height: 1.4;
    pointer-events: none; /* don't block map or page interactions */
}
.inflect-caption a { pointer-events: auto; }

/* Special styling for note captions (starting with !!!) */
.inflect-caption.note-caption {
    background: #ffd200;
    color: #000;
}

body.content-top .inflect-caption {
    top: auto;
    bottom: 8px;
}

/* From theme.css */
section {
    margin: auto 0;
    padding-right: 3vh;
    max-width: 60vh;
    color: #fff;
    display: flex;
    justify-content: flex-end;
    flex-direction: column;
}

body.content-top section {
    justify-content: flex-start;
    margin-top: 8px;
}

section:first-of-type, section:last-of-type {
    display: flex;
    flex-direction: column;
}

section:first-of-type,
body.content-top section:first-of-type {
    justify-content: center;
    text-align: center; 
    max-width: 100%;
}
 
section:first-of-type {
    padding: 0 0 15vh;
    margin: 0 auto;
}

section:last-of-type {
    min-height: 93vh;
    margin-bottom: 0;
}

@media (max-width: 1000px) and (orientation: portrait) {
    section {
        margin: 0; /* spacing handled within main */
        max-width: none;
        height: 100dvh; /* Use dvh (dynamic viewport) for Safari mobile UI */
        padding: 0; /* Use dvh (dynamic viewport) for Safari mobile UI */
        justify-content: end;
        overflow: hidden; /* hide scrolling on main if content overflows */
        position: relative;
    }

    section:first-of-type {
        justify-content: flex-end;
        margin: 0;
    }

    section.subheader{
        justify-content: center;
        height: 100dvh; /* Use dvh (dynamic viewport) for Safari mobile UI */
    }

    body.content-top section {
        /* justify-content: end; */
        margin: 0;
        padding-top: 24px;
    }

    body.content-top section:first-of-type {
        justify-content: flex-start;
    }

    section.end .logo {
        width: 90vw;
    }
}
